<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Resume Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        @media print {
            .print-hidden {
                display: none;
            }
            #resume-preview {
                box-shadow: none;
                margin: 0;
                max-width: 100%;
                border: none;
                transform: scale(1);
            }
            body {
                background-color: #fff;
            }
            main {
                padding: 0;
            }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <header class="bg-white shadow-md print-hidden">
        <div class="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8">
            <h1 class="text-3xl font-bold text-gray-900">Professional Resume Builder</h1>
            <p class="text-gray-600 mt-1">Fill in your details below and see your resume update in real-time. Use Ctrl+P or Cmd+P to save as PDF.</p>
        </div>
    </header>

    <main class="flex flex-col lg:flex-row gap-8 p-4 md:p-8">
        <!-- Form Section -->
        <div id="form-container" class="w-full lg:w-1/2 bg-white p-6 rounded-lg shadow-lg print-hidden">
            <!-- All form content will be generated by JavaScript -->
        </div>

        <!-- Resume Preview -->
        <div class="w-full lg:w-1/2">
            <div id="resume-preview-container">
                 <!-- Resume preview will be generated by JavaScript -->
            </div>
            <button onclick="window.print()" class="mt-6 w-full bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-all shadow-md print-hidden">
                Print / Save as PDF
            </button>
        </div>
    </main>

<script>
    // --- DATA ---
    let resumeData = {
        personalInfo: {
            name: 'Meghraj Dhakal',
            title: 'Aspiring Software Developer',
            email: 'meghrajdhakal966@gmail.com',
            phone: '+91 7002681521',
            location: 'Guwahati, Assam',
            linkedin: 'linkedin.com/in/meghraj-dhakal-04a47b284/',
            github: 'github.com/Nurologist'
        },
        education: [
            {
                id: 1,
                institution: 'University of Science & Technology, Meghalaya',
                degree: 'Bachelor of Technology in Computer Science and Engineering',
                startDate: 'July 2023',
                endDate: 'July 2027',
                location: 'Ribhoi, Meghalaya',
            }
        ],
        experience: [
            {
                id: 1,
                company: 'Cognifyz Technologies',
                role: 'Software Engineer Intern',
                startDate: 'Dec 2024',
                endDate: 'Jan 2025',
                location: 'Remote',
                description: 'Completed a Java Development Internship at Cognifyz Technologies, building multiple command-line & GUI applications demonstrating core Java, multithreading, socket programming, file I/O, and error handling.'
            }
        ],
        projects: [
            {
                id: 1,
                name: 'Personal Portfolio Website',
                tech: 'React, Tailwind CSS, Vercel',
                description: 'Designed and built a responsive personal portfolio to showcase my projects and skills. Implemented a clean UI and ensured fast load times.'
            },
            {
                id: 2,
                name: 'E-commerce Store API',
                tech: 'Node.js, Express, MongoDB',
                description: 'Developed a RESTful API for an e-commerce platform with features like user authentication, product management, and order processing.'
            },
            {
                id: 3,
                name: 'RASAM',
                tech: 'Python, TensorFlow, OpenCV, Arduino, Twilio, PostgreSQL, AWS, Azure',
                description: 'Developed Code RASAM, an AI + IoT attendance system (facial recognition + RFID) for rural schools, featuring real-time dashboards, offline-first architecture, multilingual UI, and automated parent alerts, improving teaching efficiency and government reporting.'
            }
        ],
        skills: 'Java, JavaScript, React.js, Node.js, SQL / PostgreSQL, MongoDB, Git & GitHub, APIs & JSON, Python, TensorFlow / OpenCV, AWS / Azure, Data Structures & Algorithms',
        certifications: [
            {
                id: 1,
                name: 'Google Cloud Computing Foundation',
                issuer: 'NPTEL',
                date: 'Nov 2024',
            },
            {
                id: 2,
                name: 'Python',
                issuer: 'GUVI',
                date: 'Aug 2023',
            }
        ]
    };

    const formContainer = document.getElementById('form-container');
    const resumePreviewContainer = document.getElementById('resume-preview-container');

    // --- RENDER FUNCTIONS ---

    function renderForm() {
        formContainer.innerHTML = `
            <h2 class="text-2xl font-bold mb-6 border-b pb-2">Personal Information</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                ${Object.keys(resumeData.personalInfo).map(key => `
                    <input name="${key}" value="${resumeData.personalInfo[key]}" oninput="handlePersonalInfoChange(event)" placeholder="${key.charAt(0).toUpperCase() + key.slice(1)}" class="p-2 border rounded" />
                `).join('')}
            </div>
            ${renderSectionForm('education', 'Education', ['institution', 'degree', 'startDate', 'endDate', 'location'])}
            ${renderSectionForm('experience', 'Experience', ['company', 'role', 'startDate', 'endDate', 'location', 'description'])}
            ${renderSectionForm('projects', 'Projects', ['name', 'tech', 'description'])}
            
            <div class="mt-8">
                <h2 class="text-2xl font-bold mb-4">Skills</h2>
                <textarea oninput="handleSkillsChange(event)" placeholder="Comma-separated skills..." class="w-full p-2 border rounded h-24">${resumeData.skills}</textarea>
            </div>

            ${renderSectionForm('certifications', 'Certifications', ['name', 'issuer', 'date'])}
        `;
    }

    function renderSectionForm(sectionKey, title, fields) {
        return `
            <div class="mt-8">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold">${title}</h2>
                    <button onclick="addSectionItem('${sectionKey}')" class="bg-blue-500 text-white p-2 rounded-full hover:bg-blue-600 transition-colors"><i data-lucide="plus"></i></button>
                </div>
                <div id="${sectionKey}-form-items">
                    ${resumeData[sectionKey].map((item, index) => `
                        <div class="border p-4 rounded-lg mb-4 relative">
                            <button onclick="removeSectionItem('${sectionKey}', ${item.id})" class="absolute top-2 right-2 text-red-500 hover:text-red-700"><i data-lucide="trash-2"></i></button>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                ${fields.map(field => {
                                    if (field === 'description') {
                                        return `<textarea name="${field}" oninput="handleSectionChange('${sectionKey}', ${index}, event)" placeholder="${field.charAt(0).toUpperCase() + field.slice(1)}" class="w-full mt-2 p-2 border rounded h-24 md:col-span-2">${item[field]}</textarea>`;
                                    }
                                    return `<input name="${field}" value="${item[field]}" oninput="handleSectionChange('${sectionKey}', ${index}, event)" placeholder="${field.charAt(0).toUpperCase() + field.slice(1)}" class="p-2 border rounded ${fields.length % 2 !== 0 && fields.indexOf(field) === fields.length -1 ? 'md:col-span-2' : ''}" />`;
                                }).join('')}
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }

    function renderResume() {
        const { personalInfo, education, experience, projects, skills, certifications } = resumeData;
        resumePreviewContainer.innerHTML = `
            <div id="resume-preview" class="bg-white p-8 rounded-lg shadow-lg max-w-[816px] mx-auto">
                <header class="text-center border-b-2 pb-4">
                    <h1 class="text-4xl font-bold tracking-wider">${personalInfo.name}</h1>
                    <p class="text-xl text-blue-600 font-medium mt-1">${personalInfo.title}</p>
                    <div class="flex justify-center items-center gap-x-6 gap-y-2 text-sm mt-4 flex-wrap">
                        <a href="mailto:${personalInfo.email}" class="flex items-center gap-1.5 hover:text-blue-600"><i data-lucide="mail" class="w-4 h-4"></i> ${personalInfo.email}</a>
                        <a href="tel:${personalInfo.phone}" class="flex items-center gap-1.5 hover:text-blue-600"><i data-lucide="phone" class="w-4 h-4"></i> ${personalInfo.phone}</a>
                        <p class="flex items-center gap-1.5"><i data-lucide="map-pin" class="w-4 h-4"></i> ${personalInfo.location}</p>
                        <a href="https://${personalInfo.linkedin}" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 hover:text-blue-600"><i data-lucide="linkedin" class="w-4 h-4"></i> ${personalInfo.linkedin}</a>
                        <a href="https://${personalInfo.github}" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 hover:text-blue-600"><i data-lucide="github" class="w-4 h-4"></i> ${personalInfo.github}</a>
                    </div>
                </header>

                <div class="mt-6">
                    <section>
                        <h2 class="text-xl font-bold text-blue-700 border-b-2 border-blue-200 pb-1 mb-3">EDUCATION</h2>
                        ${education.map(edu => `
                            <div class="mb-3">
                                <div class="flex justify-between items-end">
                                    <h3 class="text-lg font-semibold">${edu.institution}</h3>
                                    <p class="text-sm font-light text-gray-600">${edu.startDate} - ${edu.endDate}</p>
                                </div>
                                <div class="flex justify-between items-start">
                                    <p class="text-md italic">${edu.degree}</p>
                                    <p class="text-sm font-light text-gray-600">${edu.location}</p>
                                </div>
                            </div>
                        `).join('')}
                    </section>

                     <section class="mt-6">
                        <h2 class="text-xl font-bold text-blue-700 border-b-2 border-blue-200 pb-1 mb-3">EXPERIENCE</h2>
                        ${experience.map(exp => `
                            <div class="mb-4">
                                <div class="flex justify-between items-end">
                                    <h3 class="text-lg font-semibold">${exp.company}</h3>
                                    <p class="text-sm font-light text-gray-600">${exp.startDate} - ${exp.endDate}</p>
                                </div>
                                <div class="flex justify-between items-start mb-1">
                                    <p class="text-md italic">${exp.role}</p>
                                    <p class="text-sm font-light text-gray-600">${exp.location}</p>
                                </div>
                                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                                    ${exp.description.split('. ').filter(line => line).map(line => `<li>${line}</li>`).join('')}
                                </ul>
                            </div>
                        `).join('')}
                    </section>

                    <section class="mt-6">
                        <h2 class="text-xl font-bold text-blue-700 border-b-2 border-blue-200 pb-1 mb-3">PROJECTS</h2>
                        ${projects.map(proj => `
                            <div class="mb-4">
                                <div class="flex items-center gap-3">
                                    <h3 class="text-lg font-semibold">${proj.name}</h3>
                                    <p class="text-sm text-gray-600">| <span class="font-medium italic">${proj.tech}</span></p>
                                </div>
                                <p class="text-sm text-gray-700 mt-1">${proj.description}</p>
                            </div>
                        `).join('')}
                    </section>

                    <section class="mt-6">
                        <h2 class="text-xl font-bold text-blue-700 border-b-2 border-blue-200 pb-1 mb-3">SKILLS</h2>
                        <div class="flex flex-wrap gap-2">
                            ${skills.split(',').map(skill => skill.trim()).filter(skill => skill).map(skill => `
                                <span class="bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full">${skill}</span>
                            `).join('')}
                        </div>
                    </section>

                    <section class="mt-6">
                        <h2 class="text-xl font-bold text-blue-700 border-b-2 border-blue-200 pb-1 mb-3">CERTIFICATIONS</h2>
                        ${certifications.map(cert => `
                            <div class="mb-2">
                                <div class="flex justify-between items-end">
                                    <h3 class="text-md font-semibold">${cert.name}</h3>
                                    <p class="text-sm font-light text-gray-600">${cert.date}</p>
                                </div>
                                <p class="text-sm italic text-gray-700">${cert.issuer}</p>
                            </div>
                        `).join('')}
                    </section>
                </div>
            </div>
        `;
        lucide.createIcons();
    }

    // --- EVENT HANDLERS ---
    
    function handlePersonalInfoChange(event) {
        const { name, value } = event.target;
        resumeData.personalInfo[name] = value;
        renderAll();
    }

    function handleSkillsChange(event) {
        resumeData.skills = event.target.value;
        renderAll();
    }

    function handleSectionChange(sectionKey, index, event) {
        const { name, value } = event.target;
        resumeData[sectionKey][index][name] = value;
        renderAll();
    }

    function addSectionItem(sectionKey) {
        const newItem = { id: Date.now() };
        const fields = Object.keys(resumeData[sectionKey][0] || {});
        fields.forEach(field => {
            if (field !== 'id') newItem[field] = '';
        });
        resumeData[sectionKey].push(newItem);
        renderAll();
    }

    function removeSectionItem(sectionKey, id) {
        resumeData[sectionKey] = resumeData[sectionKey].filter(item => item.id !== id);
        renderAll();
    }
    
    function renderAll() {
        // A slightly inefficient but simple way to keep UI in sync
        const focusedElement = document.activeElement;
        const focusedName = focusedElement ? focusedElement.name : null;
        const focusedIndex = focusedElement ? findIndexInForm(focusedElement) : null;
        
        renderForm();
        renderResume();

        // Restore focus
        if(focusedName) {
            let elementToFocus;
            if (focusedIndex !== null) {
                const sectionKey = focusedElement.closest('[id$="-form-items"]').id.replace('-form-items', '');
                elementToFocus = document.querySelector(`#${sectionKey}-form-items`).children[focusedIndex]?.querySelector(`[name="${focusedName}"]`);
            } else {
                 elementToFocus = document.querySelector(`[name="${focusedName}"]`);
            }
             if(elementToFocus) elementToFocus.focus();
        }
    }

    function findIndexInForm(element) {
        const itemDiv = element.closest('.border.p-4.rounded-lg');
        if (!itemDiv || !itemDiv.parentElement) return null;
        return Array.from(itemDiv.parentElement.children).indexOf(itemDiv);
    }

    // --- INITIALIZATION ---
    document.addEventListener('DOMContentLoaded', () => {
        renderAll();
    });

</script>
</body>
</html>

